<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Results - Sta. Rita College</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body{font-family:Inter,system-ui,Arial;background:#f4f7fc;margin:0;padding:24px}
      .card{border-radius:12px}
      .bar{height:14px;background:#e9eefb;border-radius:999px;overflow:hidden}
      .fill{height:100%;background:linear-gradient(90deg,#2563eb,#06b6d4);width:0;transition:width 900ms ease}
      .candidate-row{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0}
      footer{color:#666;margin-top:26px;text-align:center}
      .logo{width:64px;border-radius:12px}
    </style>
  </head>
  <body>
    <div class="container-lg">
      <div class="d-flex align-items-center gap-3 mb-4">
        <img src="srclogo.webp" alt="logo" class="logo">
        <div>
          <h3 class="mb-0">Sta. Rita College — Election Results</h3>
          <small class="text-muted">Live summary of votes</small>
        </div>
      </div>

      <div class="row g-3">
        <div class="col-lg-8">
          <div class="card p-4">
            <h5 class="mb-3">President</h5>
            <div id="president-list"></div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card p-4">
            <h5 class="mb-3">Summary</h5>
            <p class="mb-1 text-muted">Total voters counted</p>
            <h2 id="total-voters">0</h2>
            <hr>
            <a href="admin.html" class="btn btn-outline-primary btn-sm">Back to Admin</a>
          </div>
        </div>
      </div>

      <div class="mt-4 card p-4">
        <h5 class="mb-3">Vice President</h5>
        <div id="vp-list"></div>
      </div>

      <footer>
        2025 Sta. Rita College • Developed by Tristan L. Duque
      </footer>
    </div>

    <script>
      // Example data — replace with dynamic data when available
      const president = [
        { name: 'Justine', votes: 75 },
        { name: 'Shin', votes: 120 },
        { name: 'John Paul', votes: 95 }
      ];

      const vice = [
        { name: 'Meong', votes: 140 },
        { name: 'Jessica', votes: 80 },
        { name: 'Nicole', votes: 60 }
      ];

      function renderList(containerId, items){
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        const total = items.reduce((s,i)=>s+i.votes,0) || 1;
        items.forEach(i=>{
          const percent = Math.round(i.votes / total * 100);
          const row = document.createElement('div');
          row.className = 'candidate-row';
          row.innerHTML = `
            <div style="flex:1">
              <div style="font-weight:700">${i.name}</div>
              <div class="bar mt-2"><div class="fill" style="width:${percent}%"></div></div>
            </div>
            <div style="width:88px;text-align:right"><div style="font-weight:700">${i.votes}</div><div class="text-muted" style="font-size:12px">${percent}%</div></div>
          `;
          container.appendChild(row);
        });
        return total;
      }

      // Render and animate fills after DOM
      document.addEventListener('DOMContentLoaded', ()=>{
        const totalPres = renderList('president-list', president);
        const totalVp = renderList('vp-list', vice);
        document.getElementById('total-voters').textContent = totalPres + totalVp;
        // trigger transition (fills already have width inline) — small timeout keeps animation
        requestAnimationFrame(()=>{
          document.querySelectorAll('.fill').forEach(el=>{
            // reflow then keep as-is to animate
            const w = el.style.width;
            el.style.width = '0%';
            setTimeout(()=>el.style.width = w, 30);
          });
        });
      });
    </script>
  </body>
</html>
        ]

     </script>
